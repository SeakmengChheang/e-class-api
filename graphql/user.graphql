enum Gender {
    MALE @enum(value: "male")
    FEMALE @enum(value: "female")
    OTHERS @enum(value: "others")
}

type User {
    id: ID!
    uuid: String
    username: String!
    email: String!
    created_at: DateTimeTz!
    updated_at: DateTimeTz!
    identity: Identity @hasOne
}

type Identity {
    id: ID!
    user_id: Int!
    first_name: String!
    last_name: String!
    gender: Gender!
    photo_url: String
    contact_number: String
    created_at: DateTimeTz!
    updated_at: DateTimeTz!
}

input CreateUserInput {
    username: String!
    email: String!
    password: String!
    password_confirmation: String!
    first_name: String!
    last_name: String!
    gender: Gender!
    contact_number: String
    photo: Upload
}

input UpdateIdentityInput {
    user_id: ID!
    first_name: String
    last_name: String
    gender: Gender
    contact_number: String
    photo: Upload
}

input UpdateUserCredentials {
    user_id: ID!
    email: String
    username: String
    uuid: String
    password: String
    password_confirmation: String
}

type Mutation {
    createUser(input: CreateUserInput! @spread): User! @createUserValidation
    updateUserCredentials(input: UpdateUserCredentials! @spread): User! @updateUserCredentialsValidation
    deleteUser(id: ID! @eq): User!
    updateIdentity(input: UpdateIdentityInput! @spread): User! @updateIdentityValidation
}

type Query  {
    users: [User!]! @paginate(defaultCount: 10)
    user(id: ID @eq): User @find
    userFindByUsername(username: String! @eq): User @find
}
